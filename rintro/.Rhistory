library(readr)
drift_simple_2021 <- read_csv("drift_simple_2021.csv")
View(drift_simple_2021)
order_plot <- ggplot(order_biomass, aes(Site, total_biomass, fill = Order)) +
geom_col(position = "stack") +
facet_wrap(~month, nrow = 3)
# run this
inverts %>%
filter(month == "Jun") %>%
group_by(Site) %>%
summarize(total_biomass = sum(mass_mg, na.rm = T)) # in the sum function we can add a line that says remove NA = TRUE
# sort to find max biomass
june_biomass %>%
arrange(-total_biomass) # arrange will sort the dataframe in ascending or descending order based on the column values you give it; here we use -total_biomass because the default is set to ascending order and we want descending order!
setwd("C:/Users/racha/Desktop/R Help/R workshop")
setwd("C:/Users/jiashuchen/salmon-research")
setwd("/Users/jiashuchen/salmon-research")
library(tidyverse)
setwd("/Users/jiashuchen/salmon-research")
library(tidyverse)
inverts <- read_csv("drift_simple_2021.csv")
# run this
inverts %>%
filter(month == "Jun") %>%   # filter in the column we are interested in (month) and match the category we want (June)
group_by(Site) %>%    # we are putting everything under the same site into one bin - you could group by more than one variable
summarize(total_biomass = sum(mass_mg)) # we are creating a column called total_biomass that is summing all biomass (mass_mg in our table) within a site
inverts <- read_csv("drift_simple_2021.csv")
setwd("/Users/jiashuchen/salmon-research/reintrotordataanalysisworkshops")
library(tidyverse)
inverts <- read_csv("drift_simple_2021.csv")
# note when we run this function, you can see what kind each column is
view(inverts)
# run this
inverts %>%
filter(month == "Jun") %>%   # filter in the column we are interested in (month) and match the category we want (June)
group_by(Site) %>%    # we are putting everything under the same site into one bin - you could group by more than one variable
summarize(total_biomass = sum(mass_mg)) # we are creating a column called total_biomass that is summing all biomass (mass_mg in our table) within a site
order_biomass %>%
filter(Order %in% c("Ephemeroptera", "Plecoptera", "Trichoptera")) %>%
ggplot(aes(Site, total_biomass, fill = Order)) +
geom_col(position = "stack") +
facet_wrap(~month, nrow = 3) +
theme_bw() +
ylab("Biomass (mg)") +
theme(axis.title = element_text(size = 14),
axis.text.x = element_text(angle = 90)) +
scale_fill_viridis(discrete = T) # the viridis package has its own scale functions
# start with this
inverts %>%
group_by(Site_Seq, month) %>%  # group by Site-Seq and month to collapse all biomass within a pool during a month
mutate(total_biomass = sum(mass_mg, na.rm = T)) # find the total biomass for each pool, at each month
# save as an object
pool_biomass <- inverts %>%
group_by(Site_Seq, month) %>%
mutate(total_biomass = sum(mass_mg, na.rm = T))
pool_biomass %>%
group_by(Site) %>%  # now we want to collapse by Site
summarize(avg_biomass_pool = mean(total_biomass, na.rm = T)) # for each site, find the mean biomass across all pools and months
inverts %>%
group_by(Site) %>%
summarize(avg = mean(mass_mg, na.rm = T))
ggplot(order_biomass, aes(Site, total_biomass)) + # data we want to use, then within aes() we put our x and y arguments
geom_point()      # we need to tell it what kind of plot we want, in this case we chose points arranged by site
ggplot(order_biomass, aes(Site, total_biomass)) + # data we want to use, then within aes() we put our x and y arguments
geom_point()      # we need to tell it what kind of plot we want, in this case we chose points arranged by site
order_biomass <- inverts %>%
group_by(Site_Seq, Site, month, Order) %>%
summarize(total_biomass = sum(mass_mg, na.rm = T)) %>%
arrange(desc(month))
view(order_biomass) # check out our final table
setwd("/Users/jiashuchen/salmon-research/reintro")
setwd("/Users/jiashuchen/salmon-research/rintro")
library(tidyverse)
gc()
setwd("/Users/jiashuchen/salmon-research/sp23-salmon-research/rintro")
library(tidyverse)
